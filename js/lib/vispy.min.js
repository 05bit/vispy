!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.vispy=e()}}(function(){var e;return function t(e,n,r){function i(l,a){if(!n[l]){if(!e[l]){var u="function"==typeof require&&require;if(!a&&u)return u(l,!0);if(o)return o(l,!0);var s=new Error("Cannot find module '"+l+"'");throw s.code="MODULE_NOT_FOUND",s}var f=n[l]={exports:{}};e[l][0].call(f.exports,function(t){var n=e[l][1][t];return i(n?n:t)},f,f.exports,t,e,n,r)}return n[l].exports}for(var o="function"==typeof require&&require,l=0;l<r.length;l++)i(r[l]);return i}({1:[function(e,t,n){var r=(e("./lib/screenfull.min.js"),e("./vispycanvas.js")),i=e("./gloo.js"),o=e("./events.js");e("./util.js"),e("./data.js");e("./lib/jquery.mousewheel.min.js")($);var l=function(){this.events=o,this.gloo=i,this._is_loop_running=!1,this._canvases=[]};l.prototype.init=function(e){var t;t=$(e);var n=new r(t);return n.deactivate_context_menu(),this.events.init(n),this.gloo.init(n),this.register(n),n},l.prototype.register=function(e){this._canvases.push(e)},l.prototype.unregister=function(e){var t=this._canvases.indexOf(e);t>-1&&this._canvases.splice(t,1)},l.prototype.start_event_loop=function(){if(!this._is_loop_running){window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();var e=this;!function t(){e._request_id=requestAnimFrame(t);try{for(var n=0;n<e._canvases.length;n++)e._canvases[n].event_tick()}catch(r){throw e.stop_event_loop(),r}}(),this._is_loop_running=!0,console.debug("Event loop started.")}},l.prototype.stop_event_loop=function(){window.cancelAnimationFrame(this._request_id),this._is_loop_running=!1,console.debug("Event loop stopped.")},t.exports=new l},{"./data.js":2,"./events.js":3,"./gloo.js":5,"./lib/jquery.mousewheel.min.js":6,"./lib/screenfull.min.js":7,"./util.js":8,"./vispycanvas.js":9}],2:[function(e,t,n){function r(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(n),i=0;i<n;i++){var o=t.charCodeAt(i);r[i]=o}return r.buffer}function i(e){var t=e.storage_type;if(void 0==t)return e;var n=e.data_type,i=e.buffer;if("javascript_array"==t)return o[n](i);if("javascript_typed_array"==t||"array_buffer"==t)return i;if("binary"==t)return i.buffer;if("base64"==t){var l=r(i);return l}}var o={float32:Float32Array,int8:Int8Array,int16:Int16Array,int32:Int32Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array};t.exports={to_array_buffer:i}},{}],3:[function(e,t,n){function r(e,t){var n=e.getBoundingClientRect();return[t.clientX-n.left,t.clientY-n.top]}function i(e){var t=[];return e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),e.shiftKey&&t.push("shift"),t}function o(e){return String.fromCharCode(e).toUpperCase().trim()}function l(e){return window.event?e.keyCode:e.which?e.which:void 0}function a(e){var t=l(e),n=m[t];return void 0==n&&(n=o(t)),n}function u(e,t,n){if(e._eventinfo.is_button_pressed)var o=v[t.button];else o=null;var l=r(e.$el.get(0),t),a=i(t),u=e._eventinfo.press_event,s=(e._eventinfo.last_event,{type:n,pos:l,button:o,is_dragging:null!=u,modifiers:a,delta:null,press_event:u,last_event:null});return s}function s(e,t){var n={type:"resize",size:t};return n}function f(e){var t={type:"paint"};return t}function c(e){var t={type:"initialize"};return t}function g(e,t,n){var r=i(t),o=(e._eventinfo.last_event,{type:n,modifiers:r,key_code:a(t),last_event:null});return o}function p(e,t){var n=e.type;return n==t.type&&"mouse_move"==n&&e.button==t.button&e.is_dragging==t.is_dragging&e.modifiers.equals(t.modifiers)?["pos"]:[]}function _(e){void 0==e&&(e=100),this._queue=[],this.maxlen=e}function d(e){e.$el.resize(function(t){e.resize([t.width(),t.height()])}),e.event_queue=new _,e._eventinfo={type:null,pos:null,button:null,is_dragging:null,key:null,modifiers:[],press_event:null,last_event:null,delta:null},e._eventinfo.is_button_pressed=0,e.$el.mousemove(function(t){var n=u(e,t,"mouse_move");e._mouse_move(n),e.event_queue.append(n)}),e.$el.mousedown(function(t){++e._eventinfo.is_button_pressed;var n=u(e,t,"mouse_press");e._mouse_press(n),e._eventinfo.press_event=n,e.event_queue.append(n)}),e.$el.mouseup(function(t){--e._eventinfo.is_button_pressed;var n=u(e,t,"mouse_release");e._mouse_release(n),e._eventinfo.press_event=null,e.event_queue.append(n)}),e.$el.click(function(t){e._eventinfo.press_event=null}),e.$el.dblclick(function(t){e._eventinfo.press_event=null}),void 0!=e.$el.mousewheel&&e.$el.mousewheel(function(t){var n=u(e,t,"mouse_wheel");n.delta=[t.deltaX*t.deltaFactor*.01,t.deltaY*t.deltaFactor*.01],e._mouse_wheel(n),e.event_queue.append(n),t.preventDefault(),t.stopPropagation()}),e.$el.keydown(function(t){var n=g(e,t,"key_press");e._key_press(n),e.event_queue.append(n)}),e.$el.keyup(function(t){var n=g(e,t,"key_release");e._key_release(n),e.event_queue.append(n)}),e.$el.mouseout(function(e){})}var h=e("./vispycanvas.js"),m={8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CONTROL",18:"ALT",27:"ESCAPE",32:"SPACE",33:"PAGEUP",34:"PAGEDOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",45:"INSERT",46:"DELETE",91:"META",92:"META",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},v={0:1,2:2,1:3};h.prototype._mouse_press=function(e){},h.prototype._mouse_release=function(e){},h.prototype._mouse_move=function(e){},h.prototype._mouse_wheel=function(e){},h.prototype._mouse_click=function(e){},h.prototype._mouse_dblclick=function(e){},h.prototype._key_press=function(e){},h.prototype._key_release=function(e){},h.prototype._initialize=function(e){},h.prototype._resize=function(e){},h.prototype._paint=function(e){},h.prototype._event_tick=function(e){},h.prototype.on_mouse_press=function(e){this._mouse_press=e},h.prototype.on_mouse_release=function(e){this._mouse_release=e},h.prototype.on_mouse_move=function(e){this._mouse_move=e},h.prototype.on_mouse_wheel=function(e){this._mouse_wheel=e},h.prototype.on_mouse_dblclick=function(e){this._mouse_dblclick=e},h.prototype.on_key_press=function(e){this._key_press=e},h.prototype.on_key_release=function(e){this._key_release=e},h.prototype.on_initialize=function(e){this._initialize=e},h.prototype.on_resize=function(e){this._resize=e},h.prototype.on_paint=function(e){this._paint=e},h.prototype.on_event_tick=function(e){this._event_tick=e},h.prototype.initialize=function(){var e=c(this);this._set_size(),this._initialize(e)},h.prototype._set_size=function(e){return void 0==e&&(e=[this.$el.width(),this.$el.height()]),this.size=e,this.width=e[0],this.height=e[1],e},h.prototype.paint=function(){var e=f(this);this.event_queue.append(e)},h.prototype.update=h.prototype.paint,h.prototype.resize=function(e){e=this._set_size(e);var t=s(this,e);this.gl.canvas.width=e[0],this.gl.canvas.height=e[1],this.event_queue.append(t),this._resize(t)},h.prototype.event_tick=function(){this._event_tick();var e=this.execute_pending_commands();if(e>0){var t=f(this);this._paint(t)}},h.prototype.is_fullscreen=function(){return screenfull.enabled&screenfull.isFullscreen},h.prototype.toggle_fullscreen=function(){screenfull.enabled&&(screenfull.isFullscreen?(screenfull.exit(),this.resize(this._size)):(this.$el.width("100%").height("100%"),this._size=[this.$el.width(),this.$el.height()],screenfull.request(this.$el[0]),this.resize([screen.width,screen.height])))},h.prototype.deactivate_context_menu=function(){document.oncontextmenu=function(){return!1}},h.prototype.resizable=function(){var e=this;this.$el.resizable({resize:function(t,n){e.resize([n.size.width,n.size.height])}})},_.prototype.clear=function(){this._queue=[]},_.prototype.append=function(e,t){var n=!0;if(void 0==t&&(t=!0),t){var r=this._queue[this._queue.length-1];if(void 0!=r){var i=p(e,r);if(i.length>0){for(var o=0;o<i.length;o++){var l=i[o];this._queue[this._queue.length-1][l]=e[l]}n=!1}}}n&&this._queue.push(e),this._queue.length>this.maxlen&&(this._queue.shift(),this._queue[0].last_event=null)},_.prototype.get=function(){return this._queue},Object.defineProperty(_.prototype,"length",{get:function(){return this._queue.length}});var E=function(){};E.prototype.init=function(e){d(e)},t.exports=new E},{"./vispycanvas.js":9}],4:[function(e,t,n){function r(e,t,n){return console.log(typeof n),"string"!=typeof n&&(n=String.fromCharCode.apply(null,new Uint8Array(n))),console.log(typeof n),n=n.replace(/\\n/g,"\n"),console.log(typeof n),e.gl.shaderSource(t,n),e.gl.compileShader(t),!!e.gl.getShaderParameter(t,e.gl.COMPILE_STATUS)||(console.error(e.gl.getShaderInfoLog(t)),!1)}function i(e,t,n){var r=e.gl.getAttribLocation(t,n);return r}function o(e,t,n,r,i,o){var l=_(r),a=l[0],u=l[1];_vbo_info=e._ns[n];var s=_vbo_info.handle;e.gl.enableVertexAttribArray(t),e.gl.bindBuffer(e.gl.ARRAY_BUFFER,s),e.gl.vertexAttribPointer(t,u,e.gl[a],!1,i,o)}function l(e,t){e.gl.disableVertexAttribArray(t)}function a(e,t,n,r){t!==D&&(e.gl.activeTexture(e.gl.TEXTURE0+r),e.gl.bindTexture(e.gl.TEXTURE_2D,t))}function u(e,t,n,r){e.gl.activeTexture(e.gl.TEXTURE0+r),e.gl.bindTexture(e.gl.TEXTURE_2D,null)}function s(e){for(var t=[8,4,2,1],n=0;n<t.length;n++)if(e%t[n]==0)return t[n]}function f(e,t,n,r,i,o,l,a,u,f){if(e.gl.bindTexture(n,t),e.gl.pixelStorei(e.gl.UNPACK_ALIGNMENT,1),null===l)e.gl.texImage2D(n,0,r,i,o,0,r,e.gl.UNSIGNED_BYTE,l);else if(l.getContext)e.gl.texImage2D(n,0,e.gl.RGBA,e.gl.RGBA,e.gl.UNSIGNED_BYTE,l);else if(l.canvas)e.gl.texImage2D(n,0,e.gl.RGBA,e.gl.RGBA,e.gl.UNSIGNED_BYTE,l.canvas);else{var c;if(c=f==e.gl.FLOAT?new Float32Array(l):new Uint8Array(l),a&&u&&(u[0]!==o||u[1]!==i)){var i=u[u.length-2]*u[u.length-1],g=s(i);e.gl.pixelStorei(e.gl.UNPACK_ALIGNMENT,g),e.gl.texSubImage2D(n,0,a[1],a[0],u[1],u[0],r,f,c)}else e.gl.pixelStorei(e.gl.UNPACK_ALIGNMENT,1),e.gl.texImage2D(n,0,r,i,o,0,r,f,c)}}function c(e,t,n,r,i,o){e.gl.bindBuffer(n,t),o?e.gl.bufferSubData(n,r,i):e.gl.bufferData(n,i,e.gl.STATIC_DRAW)}function g(e,t,n,r){array=U(r),n.indexOf("Matrix")>0?e.gl[n](t,!1,array):e.gl[n](t,array)}function p(e){return B[e]}function _(e){return C[e]}function d(e){return M[e]}function h(e){return N[e]}function m(e){return q[e][0]}function v(e){return q[e][1]}function E(e,t){for(var n=t.split("|"),r=0,i=0;i<n.length;i++){var o=n[i].toUpperCase().trim();r|=e.gl[o]}return r}function y(e){var t=e.gl.checkFramebufferStatus(e.gl.FRAMEBUFFER);if(t!=e.gl.FRAMEBUFFER_COMPLETE)throw t==e.gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT?"FrameBuffer attachments are incomplete.":t==e.gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT?"No valid attachments in the FrameBuffer.":t==e.gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS?"attachments do not have the same width and height.":t==e.gl.FRAMEBUFFER_UNSUPPORTED?"Combination of internal formats used by attachments is not supported.":"Unknown framebuffer error"+t}function b(e,t){var n=e._ns[t],r=e.env.fb_stack;return 0==r.length&&r.push(null),r[r.length-1]===n.handle?void S("Frame buffer already active {0}".format(t)):(S("Binding frame buffer {0}.".format(t)),e.gl.bindFramebuffer(e.gl.FRAMEBUFFER,n.handle),void r.push(n.handle))}function x(e,t){var n=e._ns[t],r=e.env.fb_stack;for(0==r.length&&r.push(null);r[r.length-1]===n.handle;)r.pop();S("Binding previous frame buffer"),e.gl.bindFramebuffer(e.gl.FRAMEBUFFER,r[r.length-1])}function w(e){e.env={fb_stack:[]}}function F(){this._queue=[]}var T=e("./vispycanvas.js"),R=e("./util.js"),A=e("./data.js"),S=R.debug,U=A.to_array_buffer,D="JUST_DELETED",B={float32:"FLOAT",uint8:"UNSIGNED_BYTE"},C={"float":["FLOAT",1],vec2:["FLOAT",2],vec3:["FLOAT",3],vec4:["FLOAT",4],"int":["INT",1],ivec2:["INT",2],ivec3:["INT",3],ivec4:["INT",4]},M={"float":"uniform1fv",vec2:"uniform2fv",vec3:"uniform3fv",vec4:"uniform4fv","int":"uniform1iv",ivec2:"uniform2iv",ivec3:"uniform3iv",ivec4:"uniform4iv",mat2:"uniformMatrix2fv",mat3:"uniformMatrix3fv",mat4:"uniformMatrix4fv"},N={VertexBuffer:"ARRAY_BUFFER",IndexBuffer:"ELEMENT_ARRAY_BUFFER",Texture2D:"TEXTURE_2D"},q={color:["COLOR_ATTACHMENT0","RGBA4"],depth:["DEPTH_ATTACHMENT","DEPTH_COMPONENT16"],stencil:["STENCIL_ATTACHMENT","STENCIL_INDEX8"]};F.prototype.clear=function(){this._queue=[]},F.prototype.append=function(e){this._queue.push(e)},F.prototype.append_multi=function(e){for(var t=0;t<e.length;t++)this._queue.push(e[t])},F.prototype.get=function(){return this._queue},Object.defineProperty(F.prototype,"length",{get:function(){return this._queue.length}}),T.prototype.set_deferred=function(e){this._deferred=e},T.prototype.execute_pending_commands=function(){var e=this.glir_queue.get(),t=-1;if(0==e.length)return 0;for(var n=0;n<e.length;n++)if("SWAP"===e[n][0]){t=n;break}for(n=0;n<=t;n++)this.command(e[n],!1);return t>=0&&(S("Processed {0} events.".format(t+1)),this.glir_queue._queue=this.glir_queue._queue.slice(t+1)),t+1},T.prototype.command=function(e,t){void 0===t&&(t=this._deferred);var n=e[0].toLowerCase();t?this.glir_queue.append(e):this.glir[n](this,e.slice(1))};var O=function(){};O.prototype.init=function(e){e._ns={},e._deferred=!0,w(e),e.glir_queue=new F,e.glir=this},O.prototype.current=function(e,t){w(e),e.gl.bindFramebuffer(e.gl.FRAMEBUFFER,null)},O.prototype.swap=function(e,t){},O.prototype.create=function(e,t){var n=t[0],r=t[1];"VertexBuffer"==r?(S("Creating vertex buffer '{0}'.".format(n)),e._ns[n]={object_type:r,handle:e.gl.createBuffer(),size:0}):"IndexBuffer"==r?(S("Creating index buffer '{0}'.".format(n)),e._ns[n]={object_type:r,handle:e.gl.createBuffer(),size:0}):"FrameBuffer"==r?(S("Creating frame buffer '{0}'.".format(n)),e._ns[n]={object_type:r,handle:e.gl.createFramebuffer(),size:0,validated:!1}):"RenderBuffer"==r?(S("Creating render buffer '{0}'.".format(n)),e._ns[n]={object_type:r,handle:e.gl.createRenderbuffer(),size:0}):"Texture2D"==r?(S("Creating texture '{0}'.".format(n)),e._ns[n]={object_type:r,handle:e.gl.createTexture(),size:0,shape:[]}):"Program"==r?(S("Creating program '{0}'.".format(n)),e._ns[n]={object_type:r,handle:e.gl.createProgram(),attributes:{},uniforms:{},textures:{},texture_uniforms:{}}):"VertexShader"==r?(S("Creating VertexShader '{0}'.".format(n)),e._ns[n]={object_type:r,handle:e.gl.createShader(e.gl.VERTEX_SHADER)}):"FragmentShader"==r&&(S("Creating FragmentShader '{0}'.".format(n)),e._ns[n]={object_type:r,handle:e.gl.createShader(e.gl.FRAGMENT_SHADER)})},O.prototype["delete"]=function(e,t){var n=t[0],r=e._ns[n].object_type,i=e._ns[n].handle;e._ns[n].handle=D,"VertexBuffer"==r?(S("Deleting vertex buffer '{0}'.".format(n)),e.gl.deleteBuffer(i)):"IndexBuffer"==r?(S("Deleting index buffer '{0}'.".format(n)),e.gl.deleteBuffer(i)):"FrameBuffer"==r?(S("Deleting frame buffer '{0}'.".format(n)),e.gl.deleteFramebuffer(i)):"RenderBuffer"==r?(S("Deleting render buffer '{0}'.".format(n)),e.gl.deleteRenderbuffer(i)):"Texture2D"==r?(S("Deleting texture '{0}'.".format(n)),e.gl.deleteTexture(i)):"Program"==r?(S("Deleting program '{0}'.".format(n)),e.gl.deleteProgram(i)):r.indexOf("Shader")>=0&&(S("Deleting shader '{0}'.".format(n)),e.gl.deleteShader(i))},O.prototype.size=function(e,t){var n=t[0],r=t[1],i=t[2],o=e._ns[n],l=o.handle,a=o.object_type,u=e.gl[h(a)];a.indexOf("Texture")>=0?(o.format=i.toUpperCase(),S("Setting texture size to {1} for '{0}'.".format(n,r))):"RenderBuffer"==a?(e.gl.bindRenderbuffer(e.gl.RENDERBUFFER,l),o.format=e.gl[v(i)],e.gl.renderbufferStorage(e.gl.RENDERBUFFER,o.format,r[1],r[0]),e.gl.bindRenderbuffer(e.gl.RENDERBUFFER,null)):(S("Setting buffer size to {1} for '{0}'.".format(n,r)),c(e,l,u,0,r,!1)),o.size=r},O.prototype.data=function(e,t){var n=t[0],i=t[1],o=t[2],l=e._ns[n],a=l.object_type,u=l.handle,s=e.gl[h(a)],g=U(o);if(a.indexOf("Shader")>=0)r(e,u,g);else if(a.indexOf("Texture")>=0){var _=l.size,d=_[0],m=_[1],v=e.gl[l.format];S("Setting texture data for '{0}'.".format(n));var E=e.gl[p(o.dtype)];f(e,u,s,v,m,d,g,i,o.shape,E),l.shape=_}else S("Setting buffer data for '{0}'.".format(n)),c(e,u,s,i,g,l.size>0),l.size=g.byteLength},O.prototype.attribute=function(e,t){var n=t[0],r=t[1],o=t[2],l=t[3][0],a=t[3][1],u=t[3][2],s=e._ns[n].handle;S("Creating attribute '{0}' for program '{1}'.".format(r,n));var f=i(e,s,r);e._ns[n].attributes[r]={handle:f,type:o,vbo_id:l,stride:a,offset:u}},O.prototype.uniform=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],l=e._ns[n].handle;if(e.gl.useProgram(l),void 0==e._ns[n].uniforms[r]){S("Creating uniform '{0}' for program '{1}'.".format(r,n));var a=e.gl.getUniformLocation(l,r),u=d(i);e._ns[n].uniforms[r]=[a,u]}S("Setting uniform '{0}' to '{1}' with {2} elements.".format(r,o,o.length));var s=e._ns[n].uniforms[r],a=s[0],u=s[1];g(e,a,u,o)},O.prototype.texture=function(e,t){var n=t[0],r=t[1],i=t[2],o=e._ns[n],l=o.handle,a=e._ns[i].handle;if(a===D)return S("Removing texture '{0}' from program '{1}'".format(i,n)),void delete o.textures[i];S("Initializing texture '{0}' for program '{1}'.".format(i,n)),o.texture_uniforms.hasOwnProperty(r)&&(S("Removing previously assigned texture for '{0}'".format(r)),delete o.textures[o.texture_uniforms[r]]);var u=e.gl.getUniformLocation(l,r);o.texture_uniforms[r]=i,e._ns[n].textures[i]={sampler_name:r,sampler_handle:u,number:-1,handle:a}},O.prototype.interpolation=function(e,t){var n=t[0],r=t[1].toUpperCase(),i=t[2].toUpperCase(),o=e._ns[n].handle,l=e.gl.TEXTURE_2D;e.gl.bindTexture(l,o),e.gl.texParameteri(l,e.gl.TEXTURE_MIN_FILTER,e.gl[r]),e.gl.texParameteri(l,e.gl.TEXTURE_MAG_FILTER,e.gl[i]),e.gl.bindTexture(l,null)},O.prototype.wrapping=function(e,t){var n=t[0],r=t[1],i=e._ns[n].handle,o=e.gl.TEXTURE_2D;e.gl.bindTexture(o,i),e.gl.texParameteri(o,e.gl.TEXTURE_WRAP_S,e.gl[r[0].toUpperCase()]),e.gl.texParameteri(o,e.gl.TEXTURE_WRAP_T,e.gl[r[1].toUpperCase()]),e.gl.bindTexture(o,null)},O.prototype.draw=function(e,t){var n=t[0],r=t[1].toUpperCase(),i=t[2],s=e._ns[n].handle,f=e._ns[n].attributes,c=e._ns[n].textures,g=0;e.gl.useProgram(s);for(attribute_name in f){var p=f[attribute_name];S("Activating attribute '{0}' for program '{1}'.".format(attribute_name,n)),o(e,p.handle,p.vbo_id,p.type,p.stride,p.offset)}for(texture_id in c){var _=c[texture_id];e._ns[texture_id].handle!==D?(_.number=g,g+=1,S("Activating texture '{0}' for program '{1}' as number '{2}'.".format(texture_id,n,_.number)),a(e,_.handle,_.sampler_handle,_.number),e.gl.uniform1i(_.sampler_handle,_.number)):(S("Ignoring texture '{0}' from program '{1}'".format(texture_id,n)),_.handle=D)}if(2==i.length){var d=i[0],h=i[1];S("Rendering program '{0}' with {1}.".format(n,r)),e.gl.drawArrays(e.gl[r],d,h)}else if(3==i.length){var m=i[0],v=i[1],h=i[2],E=e._ns[m].handle;S("Rendering program '{0}' with {1} and index buffer '{2}' of type '{3}'.".format(n,r,m,v)),e.gl.bindBuffer(e.gl.ELEMENT_ARRAY_BUFFER,E),e.gl.drawElements(e.gl[r],h,e.gl[v],0)}for(attribute_name in f)S("Deactivating attribute '{0}' for program '{1}'.".format(attribute_name,n)),l(e,f[attribute_name].handle);var y={};for(texture_id in c){var _=c[texture_id];S("Deactivating texture '{0}' for program '{1}'.".format(texture_id,n)),u(e,_.handle,_.sampler_handle,_.number),e._ns[texture_id].handle!=D&&(y[texture_id]=_)}e._ns[n].textures=y},O.prototype.attach=function(e,t){var n=t[0],r=e._ns[n],i=r.object_type,o=r.handle;if("Program"==i){var l=t[1],a=e._ns[l].handle;return void e.gl.attachShader(o,a)}var u,s=t[2],c=e.gl[m(t[1])];b(e,n),0==s?(S("Attaching RenderBuffer object {0} to framebuffer {1}".format(s,n)),e.gl.framebufferRenderbuffer(e.gl.FRAMEBUFFER,c,e.gl.RENDERBUFFER,null)):(u=e._ns[s],S("Attaching {0} object {1} to framebuffer {2} for {3}".format(u.object_type,s,n,t[1])),"RenderBuffer"==u.object_type?(e.gl.bindRenderbuffer(e.gl.RENDERBUFFER,u.handle),e.gl.framebufferRenderbuffer(e.gl.FRAMEBUFFER,c,e.gl.RENDERBUFFER,u.handle),e.gl.bindRenderbuffer(e.gl.RENDERBUFFER,null)):"Texture2D"==u.object_type&&(0==u.shape.length&&(S("Setting empty texture data to unset texture before attaching to framebuffer"),f(e,u.handle,e.gl.TEXTURE_2D,e.gl[u.format],u.size[1],u.size[0],null)),e.gl.bindTexture(e.gl.TEXTURE_2D,u.handle),e.gl.framebufferTexture2D(e.gl.FRAMEBUFFER,c,e.gl.TEXTURE_2D,u.handle,0),e.gl.bindTexture(e.gl.TEXTURE_2D,null))),e._ns[n].validated=!1,x(e,n)},O.prototype.link=function(e,t){var n=e._ns[t[0]].handle;e.gl.linkProgram(n),e.gl.getProgramParameter(n,e.gl.LINK_STATUS)||console.warn("Could not initialise shaders on program '{0}'.".format(n))},O.prototype.framebuffer=function(e,t){var n=t[0],r=t[1],i=e._ns[n];r?(S("Binding framebuffer {0}".format(n)),b(e,n),i.validated||(i.validated=!0,y(e))):(S("Unbinding framebuffer {0}".format(n)),x(e,n))},O.prototype.func=function(e,t){var n=t[0];S("Calling {0}({1}).".format(n,t.slice(1)));for(var r=1;r<t.length;r++)"string"==typeof t[r]&&(t[r]=E(e,t[r]));var i=e.gl[n],o=t.slice(1);i.apply(e.gl,o)},t.exports=new O},{"./data.js":2,"./util.js":8,"./vispycanvas.js":9}],5:[function(e,t,n){function r(e){var t=e.$el.get(0);e.gl=t.getContext("webgl")||t.getContext("experimental-webgl");var n=e.gl.getExtension("OES_standard_derivatives")||e.gl.getExtension("MOZ_OES_standard_derivatives")||e.gl.getExtension("WEBKIT_OES_standard_derivatives");null===n&&console.warn("Extension 'OES_standard_derivatives' is not supported in this browser. Some features may not work as expected");var n=e.gl.getExtension("OES_element_index_uint")||e.gl.getExtension("MOZ_OES_element_index_uint")||e.gl.getExtension("WEBKIT_OES_element_index_uint");null===n&&console.warn("Extension 'OES_element_index_uint' is not supported in this browser. Some features may not work as expected");var n=e.gl.getExtension("OES_texture_float");null===n&&console.warn("Extension 'OES_texture_float' is not supported in this browser. Some features may not work as expected");var n=e.gl.getExtension("OES_texture_float_linear");null===n&&console.warn("Extension 'OES_texture_float_linear' is not supported in this browser. Some features may not work as expected")}var i=e("./gloo.glir.js"),o=function(){this.glir=i};o.prototype.init=function(e){r(e),this.glir.init(e)},t.exports=new o},{"./gloo.glir.js":4}],6:[function(t,n,r){!function(t){"function"==typeof e&&e.amd?e(["jquery"],t):"object"==typeof r?n.exports=t:t(jQuery)}(function(e){function t(t){var l=t||window.event,a=u.call(arguments,1),s=0,c=0,g=0,p=0,_=0,d=0;if(t=e.event.fix(l),t.type="mousewheel","detail"in l&&(g=-1*l.detail),"wheelDelta"in l&&(g=l.wheelDelta),"wheelDeltaY"in l&&(g=l.wheelDeltaY),"wheelDeltaX"in l&&(c=-1*l.wheelDeltaX),"axis"in l&&l.axis===l.HORIZONTAL_AXIS&&(c=-1*g,g=0),s=0===g?c:g,"deltaY"in l&&(g=-1*l.deltaY,s=g),"deltaX"in l&&(c=l.deltaX,0===g&&(s=-1*c)),0!==g||0!==c){if(1===l.deltaMode){var h=e.data(this,"mousewheel-line-height");s*=h,g*=h,c*=h}else if(2===l.deltaMode){var m=e.data(this,"mousewheel-page-height");s*=m,g*=m,c*=m}if(p=Math.max(Math.abs(g),Math.abs(c)),(!o||o>p)&&(o=p,r(l,p)&&(o/=40)),r(l,p)&&(s/=40,c/=40,g/=40),s=Math[s>=1?"floor":"ceil"](s/o),c=Math[c>=1?"floor":"ceil"](c/o),g=Math[g>=1?"floor":"ceil"](g/o),f.settings.normalizeOffset&&this.getBoundingClientRect){var v=this.getBoundingClientRect();_=t.clientX-v.left,d=t.clientY-v.top}return t.deltaX=c,t.deltaY=g,t.deltaFactor=o,t.offsetX=_,t.offsetY=d,t.deltaMode=0,a.unshift(t,s,c,g),i&&clearTimeout(i),i=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,a)}}function n(){o=null}function r(e,t){return f.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var i,o,l=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],u=Array.prototype.slice;if(e.event.fixHooks)for(var s=l.length;s;)e.event.fixHooks[l[--s]]=e.event.mouseHooks;var f=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=a.length;n;)this.addEventListener(a[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",f.getLineHeight(this)),e.data(this,"mousewheel-page-height",f.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=a.length;n;)this.removeEventListener(a[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),r=n["offsetParent"in e.fn?"offsetParent":"parent"]();return r.length||(r=e("body")),parseInt(r.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})})},{}],7:[function(e,t,n){!function(){"use strict";var e="undefined"!=typeof t&&t.exports,n="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,r=function(){for(var e,t,n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,i=n.length,o={};i>r;r++)if(e=n[r],e&&e[1]in document){for(r=0,t=e.length;t>r;r++)o[n[0][r]]=e[r];return o}return!1}(),i={request:function(e){var t=r.requestFullscreen;e=e||document.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?e[t]():e[t](n&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){document[r.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(){},onerror:function(){},raw:r};return r?(Object.defineProperties(i,{isFullscreen:{get:function(){return!!document[r.fullscreenElement]}},element:{enumerable:!0,get:function(){return document[r.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!document[r.fullscreenEnabled]}}}),document.addEventListener(r.fullscreenchange,function(e){i.onchange.call(i,e)}),document.addEventListener(r.fullscreenerror,function(e){i.onerror.call(i,e)}),void(e?t.exports=i:window.screenfull=i)):void(e?t.exports=!1:window.screenfull=!1)}()},{}],8:[function(e,t,n){function r(e){window.VISPY_DEBUG&&console.debug(e)}String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,n){return"undefined"!=typeof e[n]?e[n]:t})}),"undefined"==typeof String.prototype.trim&&(String.prototype.trim=function(){return String(this).replace(/^\s+|\s+$/g,"")}),Array.prototype.equals=function(e){if(!e)return!1;if(this.length!=e.length)return!1;for(var t=0,n=this.length;t<n;t++)if(this[t]instanceof Array&&e[t]instanceof Array){if(!this[t].equals(e[t]))return!1}else if(this[t]!=e[t])return!1;return!0},"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(e){return this.slice(0,e.length)==e}),window.VISPY_DEBUG=!1,t.exports={debug:r}},{}],9:[function(e,t,n){var r=function(e){this.$el=e};t.exports=r},{}]},{},[1])(1)});
//# sourceMappingURL=vispy.min.js.map
